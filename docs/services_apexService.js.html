<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/apexService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/apexService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const apexCommon = require('./apexCommon');

/**
 * API エンドポイント用の処理関数
 * @param {Request} req - クライアントのリクエストオブジェクト
 * @param {Response} res - クライアントに対するレスポンスオブジェクト
 */
function apexLiveApiCall(req, res) {
  // リクエストのクエリパラメーターを取得（例：/API?param=value）
  const operation = req.params.operation;

  // リクエストされたパラメーターに応じた処理を実行
  switch (operation) {
    case 'status':
      // クライアントに現在のサーバーステータスを返す
      res.json({ status: 'Server is running', clientsCount: clients.length });
      break;

    case 'clients':
      // 現在接続中のクライアント数を返す
      res.json({ clientsCount: clients.length });
      break;

    case 'change_camera':
      console.log("[CHANGE_CAMERA] TYPE: " + req.body.targetType + "  VALUE: " + req.body.targetValue);
      // カメラを変更
      apexCommon.change_camera(req.body.targetType, req.body.targetValue);
      res.json({ operation: 'change_camera', targetType: req.body.targetType, targetValue: req.body.targetValue });
      break;

    case 'pause_toggle':
      console.log("[PAUSE_TOGGLE] PRETIMER: " + req.body.preTimer);
      // ポーズの開始/終了
      apexCommon.pause_toggle(req.body.preTimer);
      res.json({ operation: 'pause_toggle', preTimer: req.body.preTimer });
      break;

    case 'create_lobby':
      console.log("[CREATE_LOBBY] Make match lobby");
      // カスタムマッチのロビーを作成
      apexCommon.create_lobby();
      res.json({ operation: 'create_lobby', message: "Lobby created" });
      break;

    case 'join_lobby':
      console.log("[JOIN_LOBBY] TOKEN: " + req.body.token);
      // カスタムマッチのロビーに参加
      apexCommon.join_lobby(req.body.token);
      res.json({ operation: 'join_lobby', token: req.body.token });
      break;

    case 'leave_lobby':
      console.log("[LEAVE_LOBBY] Leave lobby");
      // ロビーを退出
      apexCommon.leave_lobby();
      res.json({ operation: 'leave_lobby', message: "Lobby left" });
      break;

    case 'set_ready':
      console.log("[SET_READY] READY: " + req.body.ready);
      // 準備状態を変更
      apexCommon.set_ready(req.body.ready);
      res.json({ operation: 'set_ready', ready: req.body.ready });
      break;

    case 'set_matchmaking':
      console.log("[SET_MATCHMAKING] MATCHMAKING: " + req.body.matchmaking);
      // マッチメイキングを設定
      apexCommon.set_matchmaking(req.body.matchmaking);
      res.json({ operation: 'set_matchmaking', matchmaking: req.body.matchmaking });
      break;

    case 'set_team':
      console.log("[SET_TEAM] TEAM_ID: " + req.body.teamId + "  TARGET_HARDWARE_NAME: " + req.body.targetHardwareName + "  TARGET_NUCLEUS_HASH: " + req.body.targetNucleushash);
      // チームの設定
      apexCommon.set_team(req.body.teamId, req.body.targetHardwareName, req.body.targetNucleushash);
      res.json({ operation: 'set_team', teamId: req.body.teamId, targetHardwareName: req.body.targetHardwareName, targetNucleushash: req.body.targetNucleushash });
      break;

    case 'kick_player':
      console.log(`[KICK_PLAYER] TARGET_HARDWARE_NAME: ${req.body.targetHardwareName}  TARGET_NUCLEUS_HASH: ${req.body.targetNucleushash}`);
      // プレイヤーをキック
      apexCommon.kick_player(req.body.targetHardwareName, req.body.targetNucleushash);
      res.json({ operation: 'kick_player', targetHardwareName: req.body.targetHardwareName, targetNucleushash: req.body.targetNucleushash });
      break;

    case 'set_settings':
      console.log(`[SET_SETTINGS] MATCH_NAME: ${req.body.matchName}  ADMIN_CHAT: ${req.body.adminChat}  TEAM_RENAME: ${req.body.teamRename}  SELF_ASSIGN: ${req.body.selfAssign}  AIM_ASSIST: ${req.body.aimAssist}  ANON_MODE: ${req.body.anonMode}`);
      // 試合設定を適用
      apexCommon.set_settings(req.body.matchName, req.body.adminChat, req.body.teamRename, req.body.selfAssign, req.body.aimAssist, req.body.anonMode);
      res.json({ operation: 'set_settings', matchName: req.body.matchName, adminChat: req.body.adminChat, teamRename: req.body.teamRename, selfAssign: req.body.selfAssign, aimAssist: req.body.aimAssist, anonMode: req.body.anonMode });
      break;

    case 'send_chat':
      console.log("[SEND_CHAT] MESSAGE: " + req.body.message);
      // チャットメッセージを送信
      apexCommon.send_chat(req.body.message);
      res.json({ operation: 'send_chat', message: req.body.message });
      break;

    case 'get_lobby_players':
      console.log("[GET_LOBBY_PLAYERS] Fetching players in lobby");
      // ロビープレイヤー情報の取得
      apexCommon.get_lobby_players();
      res.json({ operation: 'get_lobby_players', message: "Lobby players fetched" });
      break;

    case 'set_team_name':
      console.log("[SET_TEAM_NAME] TEAM_ID: " + req.body.teamId + " NAME: " + req.body.teamName);
      // チーム名を設定
      apexCommon.set_team_name(req.body.teamId, req.body.teamName);
      res.json({ operation: 'set_team_name', teamId: req.body.teamId, teamName: req.body.teamName });
      break;

    case 'get_match_settings':
      console.log("[GET_MATCH_SETTINGS] Fetching match settings");
      // 試合設定を取得
      apexCommon.get_match_settings();
      res.json({ operation: 'get_match_settings', message: "Match settings fetched" });
      break;

    case 'set_spawn_point':
      console.log(`[SET_SPAWN_POINT] TEAMID: ${req.body.teamId}  LANDMARK: ${req.body.landmark}`);
      // チームごとにスポーンポイントを設定
      apexCommon.set_spawn_point(req.body.teamId, req.body.landmark);
      res.json({ operation: 'set_spawn_point', teamId: req.body.teamId, landmark: req.body.landmark });
      break;

    default:
      // デフォルトのレスポンス
      res.json({ message: 'APIエンドポイントにアクセスしました。', query: req.query });
      break;
  }
}

module.exports = { apexLiveApiCall };
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CustomMatch.html">CustomMatch</a></li><li><a href="CustomMatch.CustomMatch.html">CustomMatch</a></li><li><a href="Datacenter.html">Datacenter</a></li><li><a href="Datacenter.Datacenter.html">Datacenter</a></li><li><a href="Event.html">Event</a></li><li><a href="Inventory.html">Inventory</a></li><li><a href="Inventory.Inventory.html">Inventory</a></li><li><a href="Item.html">Item</a></li><li><a href="Player.html">Player</a></li><li><a href="Player.Player.html">Player</a></li><li><a href="Ring.html">Ring</a></li><li><a href="Ring.Ring.html">Ring</a></li><li><a href="Vector3.html">Vector3</a></li><li><a href="Vector3.Vector3.html">Vector3</a></li><li><a href="Version.html">Version</a></li><li><a href="Version.Version.html">Version</a></li><li><a href="Weapon.html">Weapon</a></li><li><a href="Weapon.Weapon.html">Weapon</a></li></ul><h3>Global</h3><ul><li><a href="global.html#apexLiveApiCall">apexLiveApiCall</a></li><li><a href="global.html#change_camera">change_camera</a></li><li><a href="global.html#checkItemLevel">checkItemLevel</a></li><li><a href="global.html#checkShieldPenetrator">checkShieldPenetrator</a></li><li><a href="global.html#closeAllClients">closeAllClients</a></li><li><a href="global.html#configureServer">configureServer</a></li><li><a href="global.html#create_lobby">create_lobby</a></li><li><a href="global.html#ensureFolderExists">ensureFolderExists</a></li><li><a href="global.html#getServerList">getServerList</a></li><li><a href="global.html#get_lobby_players">get_lobby_players</a></li><li><a href="global.html#get_match_settings">get_match_settings</a></li><li><a href="global.html#handleApiRequest">handleApiRequest</a></li><li><a href="global.html#handleMessage">handleMessage</a></li><li><a href="global.html#handleNotify">handleNotify</a></li><li><a href="global.html#join_lobby">join_lobby</a></li><li><a href="global.html#kick_player">kick_player</a></li><li><a href="global.html#leave_lobby">leave_lobby</a></li><li><a href="global.html#logMessage">logMessage</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#pause_toggle">pause_toggle</a></li><li><a href="global.html#readConfig">readConfig</a></li><li><a href="global.html#registerOnServersStarted">registerOnServersStarted</a></li><li><a href="global.html#runCommand">runCommand</a></li><li><a href="global.html#runPowerShellCommand">runPowerShellCommand</a></li><li><a href="global.html#runRegularCommand">runRegularCommand</a></li><li><a href="global.html#saveData">saveData</a></li><li><a href="global.html#saveLog">saveLog</a></li><li><a href="global.html#send">send</a></li><li><a href="global.html#sendClients">sendClients</a></li><li><a href="global.html#sendMapInitialization">sendMapInitialization</a></li><li><a href="global.html#sendPlayerPositionUpdate">sendPlayerPositionUpdate</a></li><li><a href="global.html#sendRingUpdate">sendRingUpdate</a></li><li><a href="global.html#send_chat">send_chat</a></li><li><a href="global.html#serialized_request">serialized_request</a></li><li><a href="global.html#set_matchmaking">set_matchmaking</a></li><li><a href="global.html#set_ready">set_ready</a></li><li><a href="global.html#set_settings">set_settings</a></li><li><a href="global.html#set_spawn_point">set_spawn_point</a></li><li><a href="global.html#set_team">set_team</a></li><li><a href="global.html#set_team_name">set_team_name</a></li><li><a href="global.html#shutdownServers">shutdownServers</a></li><li><a href="global.html#sseEndpoint">sseEndpoint</a></li><li><a href="global.html#startAllServers">startAllServers</a></li><li><a href="global.html#startApexLegends">startApexLegends</a></li><li><a href="global.html#startGame">startGame</a></li><li><a href="global.html#startServer">startServer</a></li><li><a href="global.html#stopServer">stopServer</a></li><li><a href="global.html#updatePlayer">updatePlayer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sat Nov 23 2024 01:09:12 GMT+0900 (GMT+09:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
