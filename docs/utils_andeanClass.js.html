<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/andeanClass.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/andeanClass.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class Vector3
 * @description 3次元ベクトルを表すクラス
 */
class Vector3 {
    /**
     * @constructor
     * @param {number} [x=0] - X座標の値
     * @param {number} [y=0] - Y座標の値
     * @param {number} [z=0] - Z座標の値
     * @memberof Vector3
     */
    constructor(x = 0, y = 0, z = 0) {
        /**
         * @param {number} x - X座標の値
         */
        this.x = x;
        /**
         * @param {number} y - Y座標の値
         */
        this.y = y;
        /**
         * @param {number} z  - Z座標の値
         */
        this.z = z;
    }
    /**
     * 座標を更新する関数
     * @param {number} newX - 新しいx座標
     * @param {number} newY - 新しいy座標
     * @param {number} newZ - 新しいz座標
     * @param {number} mapOffset - 座標オフセット
     * @memberof Vector3
     */
    updateValues(newX, newY, newZ, mapOffset) {
        this.x = (newX + mapOffset[0]) / mapOffset[2] + 2048;
        this.y = (newY + mapOffset[1]) / mapOffset[2] + 2048;
        this.z = newZ;
    }
}
/**
 * @class Item
 * @description プレイヤーが保有するアイテムを表すクラス
 */
class Item {
    /**
     * @param {string} name - アイテムの名前
     * @param {number} level - アイテムのレベル
     * @param {number} quantity - アイテムの保有数
     */
    constructor(name, level, quantity) {
        /**
         * @param {string} name - アイテムの名前
         */
        this.name = name;
        /**
         * @param {number} level - アイテムのレベル
         */
        this.level = level;
        /**
         * @param {number} quantity - アイテムの保有数
         */
        this.quantity = quantity;
    }

    /**
     * アイテムの個数を変更する
     * @param {number} newQuantity - 新しい個数
     * @memberof Item
     */
    setQuantity(newQuantity) {
        this.quantity = newQuantity;
    }

    /**
     * アイテムの詳細を返す
     * @returns {Object} アイテムのステータス
     * @memberof Item
     */
    getItemStatus() {
        return {
            name: this.name,
            level: this.level,
            quantity: this.quantity
        };
    }
}

/**
 * 武器に関するクラス
 * @class Weapon
 * @param {string} id - 内部の武器名
 * @param {string} label - 表示されている武器名
 * @param {number} level - 武器のレベル
 */
class Weapon {
    /**
     * Creates an instance of Weapon.
     * @param {string} id - 内部の武器名
     * @param {string} label - 表示されている武器名
     * @param {number} level - 武器のレベル
     * @memberof Weapon
     */
    constructor(id, label, level) {
        /**
         * @param {string} Id - 内部の武器名
         */
        this.Id = id;
        /**
         * @param {string} label - 表示されている武器名
         */
        this.label = label;
        /**
         * @param {number} level - 武器のレベル
         */
        this.level = level;
        /**
         * @param {number} maxMagazine - AmmoUsedで使用された最大の弾数を格納
         */
        this.maxMagazine = 0;
    }

    /**
     * AmmoUsedで使用された最大の弾数を返す
     * @returns {number} AmmoUsedで使用された最大の弾数
     * @memberof Weapon
     */
    getMaxMagazine() {
        return {
            maxMagazine: this.maxMagazine
        };
    }
}

/**
 * @class Inventory
 * @description プレイヤーが持つインベントリを表すクラス
 */
class Inventory {
    /**
     * Creates an instance of Inventory.
     * @memberof Inventory
     */
    constructor() {
        /**
         * @param {item} items - アイテムの保有数
         */
        this.items = []; // Array&lt;Item>: アイテムのリスト
        /**
         * @param {number} weapons - アイテムの保有数
         */
        this.weapons = [];
    }

    /**
     * インベントリにアイテムを追加する
     * @param {Item} item 追加するアイテム
     */
    addItem(item) {
        this.items.push(item);
    }

    /**
     * インベントリに武器を追加する
     * @param {Weapon} weapon 追加するアイテム
     */
    addWeapon(weapon) {
        this.weapons.push(weapon);
    }

    /**
     * アイテムを所持しているか確認し、なければ追加、あれば所持数を更新する
     * @param {string} itemName アイテムの名前
     * @param {number} quantity 追加または更新するアイテムの個数
     * @param {number} level アイテムのレベル\
     * @memberof Inventory
     */
    addOrUpdateItem(itemName, quantity, level) {
        const existingItem = this.getItem(itemName, level);
        if (existingItem) {
            // 同じ名前とレベルのアイテムが既に存在する場合は、所持数を更新
            const newQuantity = existingItem.quantity + quantity;
            existingItem.setQuantity(newQuantity);
            console.log(`${itemName} (Level ${level}) now has a total quantity of ${existingItem.quantity}.`);
        } else {
            // アイテムが存在しない場合は、新規追加
            const newItem = new Item(itemName, level, quantity);
            this.addItem(newItem);
            console.log(`${itemName} (Level ${level}) has been added with a quantity of ${quantity}.`);
        }
    }

    /**
     * アイテムを所持しているか確認し、なければ追加、あれば所持数を更新する
     * @param {string} weaponLabel アイテムの名前
     * @param {number} level アイテムのレベル
     * @param {number} maxMagazine マガジンの最大サイズ
     * @memberof Inventory
     */
    addOrUpdateWeapon(weaponLabel, level, maxMagazine) {
        const existingItem = this.getWeapon(weaponLabel, level);
        if (existingItem) {
            // 同じ名前とレベルのアイテムが既に存在する場合は、所持数を更新
            const newQuantity = existingItem.quantity + quantity;
            existingItem.setQuantity(newQuantity);
            console.log(`${itemName} (Level ${level}) now has a total quantity of ${existingItem.quantity}.`);
        } else {
            // アイテムが存在しない場合は、新規追加
            const newItem = new Item(itemName, level, quantity);
            this.addItem(newItem);
            console.log(`${itemName} (Level ${level}) has been added with a quantity of ${quantity}.`);
        }
    }

    /**
     * インベントリ内のアイテムを取得する
     * 名前とレベルの両方で一致するアイテムを検索する
     * @param {string} itemName 取得するアイテムの名前
     * @param {number} level 取得するアイテムのレベル
     * @returns {Item|undefined} 見つかったアイテム、またはundefined
     * @memberof Inventory
     */
    getItem(itemName, level) {
        return this.items.find(item => item.name === itemName &amp;&amp; item.level === level);
    }

    /**
     * インベントリ内の武器を取得する
     * 名前とレベルの両方で一致する武器を検索する
     * @param {string} weaponId 取得する武器の名前
     * @param {number} level 取得する武器のレベル
     * @returns {Item|undefined} 見つかった武器、またはundefined
     * @memberof Inventory
     */
    getWeapon(weaponId, level) {
        return this.items.find(weapon => weapon.name === weaponId &amp;&amp; weapon.level === level);
    }

    /**
     * インベントリを空にする関数
     * @memberof Inventory
     */
    clearInventory() {
        this.items = []; // 配列を空にする
    }

    /**
     * インベントリのステータスを返す
     * @returns {Array&lt;Object>} インベントリ内のアイテムのステータス
     * @memberof Inventory
     */
    getInventoryStatus() {
        return this.items.map(item => item.getItemStatus());
    }
}

/**
 * @class Player
 * @description プレイヤーを表すクラス。インベントリとゲーム内でのステータスを保持する。
 */
class Player {
    /**
     * Creates an instance of Player.
     * @constructor
     * @param {string} name - プレイヤー名
     * @param {number} teamId - チームID (uint32)
     * @param {string} nucleusHash - プレイヤーの識別用ハッシュ
     * @param {string} hardwareName - 使用ハードウェア名
     * @memberof Player
     */
    constructor(name, teamId, nucleusHash, hardwareName) {
        /**
         * @param {string} name - プレイヤー名
         */
        this.name = name;
        /**
         * @param {number} teamId - チームID (uint32)
         */
        this.teamId = teamId;
        /**
        * @param {string} nucleusHash - プレイヤーの識別用ハッシュ
        */
        this.nucleusHash = nucleusHash;
        /**
        * @param {string} hardwareName - 使用ハードウェア名
        */
        this.hardwareName = hardwareName;
        /**
         * @param {Vector3} pos - プレイヤーの位置
         */
        this.pos = new Vector3();
        /**
         * @param {number} angles - プレイヤーの視角 
        */
        this.angles = 0;
        /**
        * @param {number} currentHealth - 現在の体力 (uint32)
         */
        this.currentHealth = 0;
        /**
        * @param {number} maxHealth - 最大体力 (uint32)
        */
        this.maxHealth = 0;
        /**
        * @param {number} shieldHealth - 現在のシールド体力 (uint32)
        */
        this.shieldHealth = 0;
        /**
        * @param {number} shieldMaxHealth - 最大シールド体力 (uint32)
        */
        this.shieldMaxHealth = 0;
        /**
        * @param {string} teamName - チーム名
        */
        this.teamName = "";
        /**
        * @param {number} squadIndex - 分隊番号 (uint32)
        */
        this.squadIndex = -1;
        /**
        * @param {string} character - キャラクター名
        */
        this.character = "";
        /**
        * @param {string} skin - キャラクタースキン名
        */
        this.skin = "";
        /**
        * @param {Inventory} inventory - プレーヤーのインベントリー
        */
        this.inventory = new Inventory();
        /**
        * @param {number} kills - キル数
        */
        this.kills = 0;                     // キル数
        /**
        * @param {number} killAssists - キルアシスト数
        */
        this.killAssists = 0;               // キルアシスト数
        /**
        * @param {number} downs - ダウンさせた数
        */
        this.downs = 0;                     // ダウンさせた数
        /**
        * @param {object} damageDealt - 敵に与えたダメージ詳細
        */
        this.damageDealt = { total: 0 };
        /**
        * @param {object} damageReceived - くらったダメージ詳細
        */
        this.damageReceived = { total: 0 };
        /**
        * @param {Boolean} isAlive - 生存状態
        */
        this.isAlive = true;
        /**
        * @param {Boolean} isOnline - 接続状態
        */
        this.isOnline = true;
        /**
        * @param {number} level - プレイヤーのレベル
        */
        this.level = {
            0: {}
        };
        /**
         * @param {object} weaponList - 所持している武器のリスト
        */
        this.weaponList = [];
    }


    /**
     * プレイヤーの位置と角度を更新する関数
     * @param {number} x 新しいx座標
     * @param {number} y 新しいy座標
     * @param {number} z 新しいz座標
     * @param {number} newAngles 新しい角度
     * @param {Object} mapOffset
     * @memberof Player
     */
    updatePositionAndAngles(x, y, z, newAngles, mapOffset) {
        this.pos.updateValues(x, y, z, mapOffset)
        this.angles = newAngles * -1 + 45;
    }

    /**
     * プレイヤーの体力とシールドを更新する関数
     * @param {number} newCurrentHealth 新しい現在の体力
     * @param {number} newMaxHealth 新しい最大体力
     * @param {number} newShieldHealth 新しいシールドの体力
     * @param {number} newShieldMaxHealth 新しい最大シールド体力
     * @memberof Player
     */
    updateHealthAndShields(newCurrentHealth, newMaxHealth, newShieldHealth, newShieldMaxHealth) {
        this.currentHealth = newCurrentHealth;
        this.maxHealth = newMaxHealth;
        this.shieldHealth = newShieldHealth;
        this.shieldMaxHealth = newShieldMaxHealth;
    }

    /**
     * プレイヤーのチーム情報、キャラクター、スキンを更新する関数
     * @param {string} newCharacter 新しいキャラクター
     * @param {string} newSkin 新しいスキン
     * @memberof Player
     */
    updateCharacter(newCharacter, newSkin) {
        this.character = newCharacter;
        this.skin = newSkin;
    }

    /**
     * プレイヤーの生存状態を変更するメソッド
     * @param {boolean} status プレイヤーが生きている場合はtrue、死んでいる場合はfalse
     * @memberof Player
     */
    setAliveStatus(status) {
        this.isAlive = status;
    }

    /**
     * プレイヤーの生存状態を変更するメソッド
     * @param {boolean} status プレイヤーが接続している場合はtrue、切断している場合はfalse
     * @memberof Player
     */
    setOnlineStatus(status) {
        this.isAlive = status;
    }

    /**
     * チーム名を変更するメソッド
     * @param {String} teamName チーム名を入力してチーム名を変更
     * @memberof Player
     */
    setTeamName(teamName) {
        this.teamName = teamName;
    }

    /**
     * チーム内のインデックスを変更するメソッド
     * @param {number} index 変更する値を入力して、その値に変更する
     * @memberof Player
     */
    setSquadIndex(index) {
        this.squadIndex = index;
    }

    /**
     * プレイヤーの生存状態を返すメソッド
     * @returns {boolean} status プレイヤーが生きている場合はtrue、死んでいる場合はfalse
     * @memberof Player
     */
    getAliveStatus() {
        return this.isAlive;
    }

    /**
     * プレイヤーの接続状態を返すメソッド
     * @returns {boolean} status プレイヤーが接続している場合はtrue、切断している場合はfalse
     * @memberof Player
     */
    getOnlineStatus() {
        return this.isOnline;
    }

    /**
     * キル数を設定するメソッド
     * @param {number} amount 設定するキル数
     * @memberof Player
     */
    setKill(amount) {
        this.kills = amount;
    }

    /**
     * キルアシスト数を設定するメソッド
     * @param {number} amount 設定するキルアシスト数
     * @memberof Player
     */
    setKillAssist(amount) {
        this.killAssists = amount;
    }

    /**
     * ダウンさせた数を設定するメソッド
     * @param {number} amount 設定するダウン数
     * @memberof Player
     */
    setDown(amount) {
        this.downs = amount;
    }

    /**
     * 敵に与えたダメージを増加させるメソッド
     * @param {string} perpetrator - 攻撃に使用したもの
     * @param {number} amount 増加させるダメージ量
     * @memberof Player
     */
    addDamageDealt(perpetrator, amount) {
        if (!perpetrator in this.damageDealt) {
            this.damageDealt[perpetrator] = 0;
        }
        this.damageDealt[perpetrator] += amount;
        this.damageDealt[total] += amount;
    }

    /**
     * 受けたダメージを増加させるメソッド
     * @param {string} perpetrator - 攻撃に使用されたもの
     * @param {number} amount - 増加させるダメージ量
     * @param {boolean} [penetrator=false] - シールド貫通武器かどうか
     * @memberof Player
     */
    addDamageReceived(perpetrator, amount, penetrator = false) {
        if (!perpetrator in this.damageReceived) {
            this.damageReceived[perpetrator] = 0;
        }
        this.damageReceived[perpetrator] += amount;
        this.damageReceived[total] += amount;

        if (penetrator) {
            
        }
    }
}

/**
 * @class Datacenter
 * @description データセンターを表すクラス
 */
class Datacenter {
    /**
     * Creates an instance of Datacenter.
     * @memberof Datacenter
     */
    constructor() {
        /**
         * @param {number} timestamp　- タイムスタンプ (uint64)
         */
        this.timestamp = 0;
        /**
         * @param {string} category - カテゴリー名
         */
        this.category = "";
        /**
         * @param {string} name - データセンター名
         */
        this.name = "";
    }
    /**
     * @param {*} timestamp　- タイムスタンプ (uint64)
     * @param {*} category - カテゴリー名
     * @param {*} name - データセンター名
     * @return {Datacenter} 
     * @memberof Datacenter
     */
    update(timestamp, category, name){
        this.timestamp = timestamp;
        this.category = category;
        this.name = name;
        return this;
    }

    /**
     * データセンターのステータスをオブジェクトとして返す
     * @returns {Object} データセンターのステータス情報
     * @memberof Datacenter
     */
    getStatus() {
        return {
            timestamp: this.timestamp,
            category: this.category,
            name: this.name
        };
    }
}

/**
 * バージョン情報を表すクラス
 * @class Version
 */
class Version {
    /**
     * @constructor
     * @param {number} major_num - メジャーバージョン番号 (uint32)
     * @param {number} minor_num - マイナーバージョン番号 (uint32)
     * @param {number} build_stamp - ビルドスタンプ (uint32)
     * @param {string} revision - リビジョン情報
     * @memberof Version
     */
    constructor(major_num, minor_num, build_stamp, revision) {
        this.major_num = major_num;
        this.minor_num = minor_num;
        this.build_stamp = build_stamp;
        this.revision = revision;
    }

    /**
     * バージョンのステータスをオブジェクトとして返す
     * @returns {Object} バージョンのステータス情報
     * @memberof Version
     */
    getStatus() {
        return {
            major_num: this.major_num,
            minor_num: this.minor_num,
            build_stamp: this.build_stamp,
            revision: this.revision
        };
    }

    /**
     * バージョンの詳細を表示するメソッド
     * @memberof Version
     */
    printDetails() {
        console.log(`Version: ${this.major_num}.${this.minor_num}`);
        console.log(`Build Stamp: ${this.build_stamp}`);
        console.log(`Revision: ${this.revision}`);
    }
}

/**
 * カスタムマッチを管理するクラス
 * @class CustomMatch
 */
class CustomMatch {
    /**
     * @constructor
     * @param {string} matchName - マッチ名
     * @memberof CustomMatch
     */
    constructor(matchName) {
        this.matchName = matchName;
        this.startTimeStamp = "";
        this.endTimeStamp = "";
        this.players = {};  // プレイヤーのリスト (最大60人) 連想配列に変更　チームにnucleusHashのみ保存
        this.teams = {};    // チームの連想配列 (teamIdをキーにする)
        this.maxPlayers = 60;
        this.state = "";  // gameStateChangedを格納
        this.mapName = "";  // マップ名を格納
        this.playlistName = "";  // マッチ名を格納 (例) World's Edge（リングなし）
        this.playlistDesc = "";  // マッチ説明を格納 (例) 最後の1部隊になるまで戦い抜け
        /**
         * 
         */
        this.datacenter = new Datacenter();  // Datacenterクラスをのオブジェクトを格納
        this.aimassiston = true;  // エイムアシストの設定値を格納
        this.anonymousMode = false;  // 匿名モードの設定値を格納
        this.serverId = "";  // サーバーIDを格納
        this.startingLoadout = new Inventory();  // 初期配布のアイテムを追加するInventoryインスタンスを作成
        this.eventLists = [];
        this.rings = [];
        this.mapOffset = [0, 0, 1]
    }

    /**
     *
     * @memberof CustomMatch
     */
    refreshEventLists() {
        this.eventLists = [];
    }

    /**
     * ringsの末尾に新しい要素を追加します。
     * ringsが3を超える場合、先頭の要素を削除します。
     * @param {Ring} ring - 追加する要素
     * @memberof CustomMatch
     */
    addRingElement(ring) {
        // 配列の長さが指定の制限を超える場合は先頭の要素を削除
        // if (this.rings.length > 3) {
        //     this.rings.shift();
        // }
        // 新しい要素を末尾に追加
        this.rings.push(ring);

        switch (ring.category) {
            case "ringStartClosing":
                this.state = `RingStartClosing_Stage_${ring.stage}`;
                break;
            case "ringFinishedClosing":
                this.state = `RingFinishedClosing_Stage_${ring.stage}`;
                break;
            default:
                console.log("[CustomMatch.addRingElement] Recived unknown message");
                break;
        }
    }

    /**
     * eventListsの末尾に新しい要素を追加します。
     * @param {Event} event - 追加する要素
     * @memberof CustomMatch
     */
    addEventElement(event) {
        // 新しい要素を末尾に追加
        this.eventLists.push(event);
    }

    /**
    * プレイヤーを追加するメソッド
    * @param {Player} player 追加するプレイヤー
    * @memberof CustomMatch
    */
    addPlayer(player) {
        if (Object.keys(this.players).length >= this.maxPlayers) {
            //console.log("Cannot add more players, the match is full.");
        } else if (this.players[player.nucleusHash]) {
            //console.log(`Player with nucleusHash ${player.nucleusHash} is already in the match.`);
        } else {
            this.players[player.nucleusHash] = player;
            //console.log(`${player.name} has joined the match.`);

            // チームにプレイヤーを追加
            if (!this.teams[player.teamId]) {
                // チームが存在しない場合は新しく作成する
                this.teams[player.teamId] = [];
            }
            this.teams[player.teamId].push(player.nucleusHash);
        }
    }

    /**
     * ゲームステータスを設定するメソッド
     * @param {String} state ゲームステータス
     * @memberof CustomMatch
     */
    setState(state) {
        this.state = state;
    }

    /**
     * マッチ開始時刻を設定するメソッド
     * @param {String} timestamp ゲームステータス
     * @memberof CustomMatch
     */
    setStartTimeStamp(timestamp) {
        this.startTimeStamp = timestamp;
    }

    /**
     * マッチ終了時刻を設定するメソッド
     * @param {String} timestamp ゲームステータス
     * @memberof CustomMatch
     */
    setEndTimeStamp(timestamp) {
        this.endTimeStamp = timestamp;
    }

    /**
     * マッチセットアップ情報を設定するメソッド
     * @param {String} mapName マップ名
     * @param {String} playlistName 
     * @param {String} playlistDesc
     * @param {Boolean} aimassiston
     * @param {Boolean} anonymousMode
     * @param {String} serverId
     * @memberof CustomMatch
     */
    setMatchSetup(mapName, playlistName, playlistDesc, aimassiston, anonymousMode, serverId) {
        this.mapName = mapName;
        this.playlistName = playlistName;
        this.playlistDesc = playlistDesc;
        this.aimassiston = aimassiston;
        this.anonymousMode = anonymousMode;
        this.serverId = serverId;
        switch (mapName) {
            case "mp_rr_canyonlands_hu":
                this.mapOffset = [-3419, -2926, 20];
                break;
            case "mp_rr_desertlands_hu":
                this.mapOffset = [0, 1, 22];
                break;
            case "mp_rr_district":
                this.mapOffset = [0, 0, 21];
                break;
            case "mp_rr_district_halloween":
                this.mapOffset = [0, 0, 21];
                break;
            case "mp_rr_divided_moon_mu1":
                this.mapOffset = [1992, -492, 21];
                break;
            case "mp_rr_freedm_skulltown":
                this.mapOffset = [1886, 294, 5];
                break;
            case "mp_rr_olympus_mu2":
                this.mapOffset = [6968, -2969, 22];
                break;
            case "mp_rr_tropic_island_mu2":
                this.mapOffset = [-594, -939, 25];
                break;
            default:
                this.mapOffset = [0, 0, 1];
                console.log("[AndeanClass.CustomMatch.setMatchSetup] Unknown map");
                break;
        }
    }

    /**
     * プレイヤーを削除するメソッド
     * @param {string} nucleusHash プレイヤーのnucleusHash
     * @memberof CustomMatch
     */
    removePlayer(nucleusHash) {
        if (this.players[nucleusHash]) {
            const removedPlayer = this.players[nucleusHash];
            delete this.players[nucleusHash];
            return `${removedPlayer.name} has been removed from the match.`;
        } else {
            return `Player with nucleusHash ${nucleusHash} not found in the match.`;
        }
    }

    /**
     * 現在のプレイヤー数を返す
     * @returns {number} 現在のプレイヤー数
     * @memberof CustomMatch
     */
    getPlayerCount() {
        return Object.keys(this.players).length;
    }

    /**
     * 特定のプレイヤーを取得するメソッド
     * @param {string} nucleusHash プレイヤーのnucleusHash
     * @returns {Player|null} 見つかったプレイヤーのステータス、見つからなければnull
     * @memberof CustomMatch
     */
    getPlayer(nucleusHash) {
        const player = this.players[nucleusHash];
        if (player) {
            return player;
        } else {
            // console.log(`Player with nucleusHash ${nucleusHash} not found.`);
            return null;
        }
    }

    /**
     * マッチのステータスを取得するメソッド
     * @returns {Object} マッチのステータスとプレイヤーリスト
     * @memberof CustomMatch
     */
    getMatchStatus() {
        return {
            matchName: this.matchName,
            startTimeStamp: this.startTimeStamp,
            endTimeStamp: this.endTimeStamp,
            gameState: this.gameState,
            mapName: this.mapName,
            playlistName: this.playlistName,
            playlistDesc: this.playlistDesc,
            datacenter: this.datacenter,
            aimassiston: this.aimassiston,
            anonymousMode: this.anonymousMode,
            serverId: this.serverId,
            startingLoadout: this.startingLoadout,
            maxPlayers: this.maxPlayers,
            playerCount: this.getPlayerCount(),
            teams: this.teams,
            players: Object.values(this.players).map(player => player.getStatus())
        };
    }
}

/**
 * Eventに関するクラス
 * @class Event
 * @param {number} timestamp - イベント発生時のタイムスタンプ
 * @param {string} category - イベントの種類
 * @param {string} nucleusHash - プレイヤーのIDかチームのID
 * @param {object} data - 受信したメッセージやクラスオブジェクトなどを入れる
 */
class Event {
    /**
     * Eventクラスの初期化
     * @param {number} _timestamp - イベント発生時のタイムスタンプ
     * @param {string} _category - イベントの種類
     * @param {string} _nucleusHash - プレイヤーID or チームID
     * @param {object} _data - 受信したメッセージやクラスオブジェクトなどを入れる
     */
    constructor(_timestamp, _category, _target, _data) {
        this.timestamp = _timestamp;
        this.category = _category;
        this.target = _target;
        this.data = _data;
    }
}

/**
 * Ringに関するクラス
 * @class Ring
 * @param {number} timestamp
 * @param {number} endtimestamp
 * @param {String} category
 * @param {number} stage
 * @param {Vector3} center
 * @param {number} currentradius
 * @param {number} shrinkduration
 * @param {number} endradius
 */
class Ring {
    /**
     * リングの初期化を行う
     * @param {number} _timestamp 
     * @param {String} _category 
     * @param {number} _stage
     * @param {Object} _center 
     * @param {number} _currentradius 
     * @param {number} _shrinkduration
     * @param {Object} _mapOffset
     * @memberof Ring
     */
    constructor(_timestamp, _category, _stage, _center, _currentRadius, _shrinkduration, _mapOffset) {
        this.timestamp = _timestamp;
        this.category = _category;
        this.stage = _stage;
        this.currentRadius = _currentRadius / _mapOffset[2];
        this.shrinkduration = _shrinkduration;
        this.endTimestamp = this.timestamp + this.shrinkduration;
        this.center = new Vector3()
        this.center.updateValues(_center.x, _center.y, _center.z, _mapOffset)
    }

    /**
     * リングオブジェクトを更新する関数
     * @param {number} _timestamp 
     * @param {string} _category 
     * @param {number} _currentRadius 
     * @param {number} _shrinkduration 
     * @param {number} _endradius 
     * @param {object} _mapOffset
     * @memberof Ring
     */
    updateRing(_timestamp, _category, _currentRadius, _shrinkduration, _endradius, _mapOffset) {
        this.timestamp = _timestamp;
        this.category = _category;
        this.currentRadius = _currentRadius / _mapOffset[2];
        this.endradius = _endradius;
        this.shrinkduration = _shrinkduration;
        this.endTimestamp = this.timestamp + this.shrinkduration;
    }
}


module.exports = {
    Vector3,
    Item,
    Inventory,
    Player,
    Datacenter,
    Version,
    CustomMatch,
    Weapon,
    Event,
    Ring
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CustomMatch.html">CustomMatch</a></li><li><a href="CustomMatch.CustomMatch.html">CustomMatch</a></li><li><a href="Datacenter.html">Datacenter</a></li><li><a href="Datacenter.Datacenter.html">Datacenter</a></li><li><a href="Event.html">Event</a></li><li><a href="Inventory.html">Inventory</a></li><li><a href="Inventory.Inventory.html">Inventory</a></li><li><a href="Item.html">Item</a></li><li><a href="Player.html">Player</a></li><li><a href="Player.Player.html">Player</a></li><li><a href="Ring.html">Ring</a></li><li><a href="Ring.Ring.html">Ring</a></li><li><a href="Vector3.html">Vector3</a></li><li><a href="Vector3.Vector3.html">Vector3</a></li><li><a href="Version.html">Version</a></li><li><a href="Version.Version.html">Version</a></li><li><a href="Weapon.html">Weapon</a></li><li><a href="Weapon.Weapon.html">Weapon</a></li></ul><h3>Global</h3><ul><li><a href="global.html#apexLiveApiCall">apexLiveApiCall</a></li><li><a href="global.html#change_camera">change_camera</a></li><li><a href="global.html#checkItemLevel">checkItemLevel</a></li><li><a href="global.html#checkShieldPenetrator">checkShieldPenetrator</a></li><li><a href="global.html#closeAllClients">closeAllClients</a></li><li><a href="global.html#configureServer">configureServer</a></li><li><a href="global.html#create_lobby">create_lobby</a></li><li><a href="global.html#ensureFolderExists">ensureFolderExists</a></li><li><a href="global.html#getServerList">getServerList</a></li><li><a href="global.html#get_lobby_players">get_lobby_players</a></li><li><a href="global.html#get_match_settings">get_match_settings</a></li><li><a href="global.html#handleApiRequest">handleApiRequest</a></li><li><a href="global.html#handleMessage">handleMessage</a></li><li><a href="global.html#handleNotify">handleNotify</a></li><li><a href="global.html#join_lobby">join_lobby</a></li><li><a href="global.html#kick_player">kick_player</a></li><li><a href="global.html#leave_lobby">leave_lobby</a></li><li><a href="global.html#logMessage">logMessage</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#pause_toggle">pause_toggle</a></li><li><a href="global.html#readConfig">readConfig</a></li><li><a href="global.html#registerOnServersStarted">registerOnServersStarted</a></li><li><a href="global.html#runCommand">runCommand</a></li><li><a href="global.html#runPowerShellCommand">runPowerShellCommand</a></li><li><a href="global.html#runRegularCommand">runRegularCommand</a></li><li><a href="global.html#saveData">saveData</a></li><li><a href="global.html#saveLog">saveLog</a></li><li><a href="global.html#send">send</a></li><li><a href="global.html#sendClients">sendClients</a></li><li><a href="global.html#sendMapInitialization">sendMapInitialization</a></li><li><a href="global.html#sendPlayerPositionUpdate">sendPlayerPositionUpdate</a></li><li><a href="global.html#sendRingUpdate">sendRingUpdate</a></li><li><a href="global.html#send_chat">send_chat</a></li><li><a href="global.html#serialized_request">serialized_request</a></li><li><a href="global.html#set_matchmaking">set_matchmaking</a></li><li><a href="global.html#set_ready">set_ready</a></li><li><a href="global.html#set_settings">set_settings</a></li><li><a href="global.html#set_spawn_point">set_spawn_point</a></li><li><a href="global.html#set_team">set_team</a></li><li><a href="global.html#set_team_name">set_team_name</a></li><li><a href="global.html#shutdownServers">shutdownServers</a></li><li><a href="global.html#sseEndpoint">sseEndpoint</a></li><li><a href="global.html#startAllServers">startAllServers</a></li><li><a href="global.html#startApexLegends">startApexLegends</a></li><li><a href="global.html#startGame">startGame</a></li><li><a href="global.html#startServer">startServer</a></li><li><a href="global.html#stopServer">stopServer</a></li><li><a href="global.html#updatePlayer">updatePlayer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sat Nov 23 2024 01:09:12 GMT+0900 (GMT+09:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
